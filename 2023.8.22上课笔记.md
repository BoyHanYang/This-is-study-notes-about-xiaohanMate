# 字符串

基本数据类型中`char`是字符类型，占2个字节16位，默认值`\u0000`，用`char`类型的变量表示单个字符，需要用引号引起来。

> 多个字符按照一定的顺序组成的列表就叫做字符序列

- `String` 字符串
- `StringBuffer`字符串缓冲区，是线程安全的
- `StringBuilder`字符串构造器，非线程安全的
- `CharBuffer`字符缓冲区

## String

字符串`java.lang.String`可以用来表示多个字符，用`""`引起来，字符串是引用数据类型，默认值是`null`。

`jdk13`新增文本块（预览）,在`jdk15`正式在字符串支持文本块，用`"""`三个双引号开头，并用三个双引号结束。

> 简单来说就是编译是样式结构是怎样的，输出就是怎样的。

**字符串具有不可变特性**

`public final static String`是用`final`修饰的类，在`java`中用`final`修饰的类不能被继承，也就是说`String`没有子类。

> 在`java`中，关键字`final`表示最终的。可以用来修饰类、方法、变量。
>
> 1. 被`final`修饰的类，不能被继承
> 2. 被`final`修饰的方法，不能被重写
> 3. 被`final`修饰的变量，不能变，如果是基本数据类型不能被重新赋值，如果是引用数据类型不能改变引用。

不可变的原因：

字符串的底层是一个数组，`jdk1.8`之前是`char`类型的数组，`jdk1.9`及之后的版本是byte类型的数组。`value`属性都是`final`的，所以不可变。

数组类型更改的原因是为了节约`String`占用的内存，另一个好处就是减少`GC`次数。

在java程序的堆里，`String`占用的空间最大，并且绝大多数`String`只有`Latin-1`字符，这些`Latin-1`字符只需要1字节就够了。在`jdk9`之前,jvm使用`char`类型的数组存储，`char`占用2个字节，即使字符串只需要1字节/字符，但依旧会按照2字节/字符进行存储，浪费了一般的内存空间。

`jdk9`的解决办法就是，一个字符串出来的时候判断，它是不是只有`Latin-1`字符，如果是，就按照1字节/每字符进行内存分配，如果不是就按照2字节/每字符规格进行分配（`UTF-16编码`）,提高了内存使用率。

`UTF-8 `实际上是对空间利用效率最高的编码集，它是不定长的，可以最大限度利用内存和网络。但是这种编码集只能用于传输和存储，并不适合拿来做 String 的底层实现。因为 `String` 有随机访问的方法，所谓随机访问，就是 `charAt` 、 `subString` 这种方法。如果字符串中的每个字符占用的内存是不定长的，那么进行随机访问的时候，就需要从头开始数每个字符的长度，才能找到你想要的字符。

使用 `UTF-16 `编码将它们表示并存储为每个字符2个字节。